[phases.setup]
nixPkgs = ["bun"]

[phases.install]
cmds = [
  "cp backend/prisma/schema.production.prisma backend/prisma/schema.prisma",
  "cd backend && bun install"
]

[phases.build]
cmds = [
  "cd backend && bun run build",
  "cd backend && bunx prisma generate",
  "cd backend && bunx prisma migrate deploy"
]

[start]
cmd = "cd backend && bun run start"
